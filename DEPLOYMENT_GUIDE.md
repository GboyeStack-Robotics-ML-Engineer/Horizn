# Horizn Deployment Guide ðŸš€

This guide outlines the steps to take your app from local development to production on the App Store and Google Play Store.

## 1. Backend Preparation (The Foundation)

Your backend currently runs locally (`localhost`) and saves data to a local file (`horizn.db`) and images to a local folder (`/uploads`). This **will not work** in production.

### Required Changes:
1.  **Switch Database to PostgreSQL**:
    *   SQLite is not suitable for production.
    *   Use a managed PostgreSQL database (e.g., Supabase, Neon, AWS RDS, DigitalOcean).
    *   Update `database.py` to connect to the PostgreSQL URL.
    *   Update `requirements.txt`: Replace `aiosqlite` with `asyncpg`.

2.  **Cloud Storage for Images**:
    *   You cannot store uploaded images on the server's disk (they will be lost on restart/redeploy).
    *   Use **AWS S3**, **Google Cloud Storage**, or **Cloudinary**.
    *   Update `auth/router.py`:
        *   Instead of `shutil.copy`, upload the file to S3.
        *   Get the public URL from S3 and save that to the database.

3.  **Environment Variables**:
    *   Never hardcode secrets (like `SECRET_KEY` or `DATABASE_URL`) in your code.
    *   Set these in your hosting provider's dashboard.

### Deployment Hosting Options:
*   **Render** (Good for beginners, handles Python + Database)
*   **Railway** (Very easy setup)
*   **DigitalOcean App Platform**
*   **Heroku**
*   **AWS App Runner** (Scalable/Enterprise)

---

## 2. Mobile App Preparation

### Configuration (`app.json`):
1.  **Package Name / Bundle ID**:
    *   You must set a unique ID for your app.
    *   Android: `com.yourname.horizn`
    *   iOS: `com.yourname.horizn`
    ```json
    "android": {
      "package": "com.ade.horizn"
    },
    "ios": {
      "bundleIdentifier": "com.ade.horizn"
    }
    ```

2.  **API URL**:
    *   Update `mobile/services/api.js` to point to your **production backend URL** (e.g., `https://api.horizn.com`), not `192.168...`.
    *   Use `expo-constants` or environment variables to switch between Dev and Prod URLs automatically.

3.  **Assets**:
    *   Ensure you have high-quality icons in `assets/icon.png` (1024x1024).
    *   Ensure `assets/adaptive-icon.png` is correct for Android.

### Build Service (EAS Build):
The easiest way to build for stores is using **Expo Application Services (EAS)**.

1.  **Install EAS CLI**:
    ```bash
    npm install -g eas-cli
    ```
2.  **Login**:
    ```bash
    eas login
    ```
3.  **Configure**:
    ```bash
    eas build:configure
    ```
4.  **Build for Android (Release)**:
    ```bash
    eas build --platform android
    ```
    *   This generates an `.aab` file for the Play Store.
5.  **Build for iOS (Release)**:
    ```bash
    eas build --platform ios
    ```
    *   This requires an Apple Developer Account ($99/year).

---

## 3. Store Submission

### Google Play Store (Android):
1.  **Create Account**: Google Play Console ($25 one-time fee).
2.  **Create App**: Fill in details (Name, Description, Screenshots).
3.  **Upload Build**: Upload the `.aab` file generated by EAS.
4.  **Privacy Policy**: You must host a simple privacy policy page (GitHub Pages is fine).
5.  **Review**: Google will review your app (takes 1-5 days).

### Apple App Store (iOS):
1.  **Create Account**: Apple Developer Program ($99/year).
2.  **App Store Connect**: Create a new app entry.
3.  **Transporter**: EAS can automatically upload the build, or you use Transporter app on Mac.
4.  **Metadata**: Screenshots (strict requirements), keywords, description.
5.  **TestFlight**: REQUIRED. Use TestFlight to test the build on real devices before submitting for review.
6.  **Review**: Apple review is strict (guidelines, design, functionality).

## Checklist for "Public Ready" âœ…
- [ ] Backend deployed to HTTPS (e.g., Render/Railway)
- [ ] Database migrated to PostgreSQL
- [ ] Images storing to Cloud (S3/Cloudinary)
- [ ] Google Sign-In configured with production keys
- [ ] App Icons and Splash screens perfected
- [ ] Error handling polished (User-friendly messages, no crashes)
- [ ] Terms of Service & Privacy Policy functionality enabled
